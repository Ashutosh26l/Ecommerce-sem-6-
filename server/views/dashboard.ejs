<%- include("partials/header", { title: "Dashboard" }) %>

<section class="relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 text-white">
  <div class="absolute -top-24 -left-20 w-72 h-72 rounded-full bg-indigo-500/20 blur-3xl"></div>
  <div class="absolute -bottom-24 -right-20 w-80 h-80 rounded-full bg-cyan-400/10 blur-3xl"></div>

  <div class="relative max-w-6xl mx-auto px-6 py-16">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
      <div>
        <p class="text-indigo-200 uppercase tracking-[0.2em] text-xs">Smart Shopping Hub</p>
        <h1 class="mt-4 text-4xl sm:text-5xl font-bold leading-tight">Simple, modern, and fast ecommerce dashboard</h1>
        <p class="mt-4 text-slate-200 text-lg">Track your products, availability, and newest arrivals in one clean screen designed for quick actions.</p>

        <div class="mt-8 flex flex-wrap gap-3">
          <a href="/products/new" class="bg-emerald-500 hover:bg-emerald-400 text-white font-semibold px-6 py-3 rounded-lg transition-colors">Add Product</a>
          <a href="/products/allProducts" class="bg-indigo-500 hover:bg-indigo-400 text-white font-semibold px-6 py-3 rounded-lg transition-colors">Browse Products</a>
          <a href="/products/allProducts?availability=true" class="bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold px-6 py-3 rounded-lg transition-colors">In Stock Items</a>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div class="bg-white/10 border border-white/20 rounded-2xl p-5 backdrop-blur">
          <p class="text-indigo-100 text-sm">Total Products</p>
          <p class="text-3xl font-bold mt-1"><%= stats.totalProducts %></p>
        </div>
        <div class="bg-white/10 border border-white/20 rounded-2xl p-5 backdrop-blur">
          <p class="text-indigo-100 text-sm">In Stock</p>
          <p class="text-3xl font-bold mt-1"><%= stats.inStockProducts %></p>
        </div>
        <div class="bg-white/10 border border-white/20 rounded-2xl p-5 backdrop-blur">
          <p class="text-indigo-100 text-sm">Out of Stock</p>
          <p class="text-3xl font-bold mt-1"><%= stats.outOfStockProducts %></p>
        </div>
        <div class="bg-white/10 border border-white/20 rounded-2xl p-5 backdrop-blur">
          <p class="text-indigo-100 text-sm">Average Price</p>
          <p class="text-3xl font-bold mt-1">&#8377; <%= stats.averagePrice %></p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="max-w-6xl mx-auto px-6 py-12">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold text-slate-900">Featured Products</h2>
        <a href="/products/allProducts" class="text-indigo-600 hover:text-indigo-500 font-medium">View all</a>
      </div>

      <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-5">
        <% if (featuredProducts && featuredProducts.length) { %>
        <% featuredProducts.forEach(function(item) { %>
        <% const imageSrc = item.image || '/mobile.jpg'; %>
        <a href="/products/<%= item._id %>" class="group border border-slate-200 rounded-xl overflow-hidden hover:shadow-md transition-shadow">
          <div class="h-40 bg-gradient-to-br from-indigo-500 to-slate-700 overflow-hidden">
            <img src="<%= imageSrc %>" alt="<%= item.name %>" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
          </div>
          <div class="p-4">
            <div class="flex items-start justify-between gap-3">
              <p class="font-semibold text-slate-900"><%= item.name %></p>
              <span class="text-xs px-2 py-1 rounded-full <%= item.isAvailable ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700' %>"><%= item.isAvailable ? 'In Stock' : 'Out' %></span>
            </div>
            <p class="text-indigo-600 font-bold mt-2">&#8377; <%= item.price %></p>
          </div>
        </a>
        <% }); %>
        <% } else { %>
        <p class="text-slate-500">No products found. Add products to see them here.</p>
        <% } %>
      </div>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
      <h2 class="text-xl font-bold text-slate-900">Quick Actions</h2>
      <div class="mt-5 space-y-3">
        <a href="/products/new" class="block w-full text-center bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 rounded-lg transition-colors">Add Product</a>
        <a href="/products/allProducts" class="block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition-colors">Go to Products</a>
        <a href="/products/allProducts?availability=true" class="block w-full text-center border border-slate-300 hover:border-slate-500 text-slate-700 font-medium py-3 rounded-lg transition-colors">Check In Stock</a>
      </div>

      <div class="mt-8 pt-6 border-t border-slate-200">
        <h3 class="font-semibold text-slate-900">Why this dashboard works</h3>
        <ul class="mt-3 text-sm text-slate-600 space-y-2 list-disc list-inside">
          <li>Fast summary of inventory health</li>
          <li>Direct route to key product pages</li>
          <li>Mobile-friendly and visually clean layout</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<%- include("partials/footer") %>
